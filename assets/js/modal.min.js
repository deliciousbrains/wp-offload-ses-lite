var wposesModal=function($){var modal={prefix:"wposes",loading:false,dismissible:true};var modals={};function targetToKey(target){return target.replace(/[^a-z]/g,"")}modal.exists=function(target){var key=targetToKey(target);if(undefined!==modals[key]){return true}if($(target).length){return true}return false};modal.open=function(target,callback,customClass){var key=targetToKey(target);$("body").append('<div id="wposes-overlay"></div>');var $overlay=$("#wposes-overlay");if(modal.dismissible){$overlay.append('<div id="wposes-modal"><span class="close-wposes-modal">Ã—</span></div>')}else{$overlay.append('<div id="wposes-modal"></div>')}var $modal=$("#wposes-modal");if(undefined===modals[key]){var content=$(target);modals[key]=content.clone(true).css("display","block");content.remove()}$modal.data("wposes-modal-target",target).append(modals[key]);if(undefined!==customClass){$modal.addClass(customClass)}if("function"===typeof callback){callback(target)}$("body").addClass("wposes-modal-open");$modal.css("display","table");$overlay.fadeIn(150);$modal.fadeIn(150);$("body").trigger("wposes-modal-open",[target])};modal.close=function(callback){if(modal.loading||!modal.dismissible){return}var target=$("#wposes-modal").data("wposes-modal-target");$("#wposes-overlay").fadeOut(150,(function(){$("body").removeClass("wposes-modal-open");$(this).remove();if("function"===typeof callback){callback(target)}}));$("body").trigger("wposes-modal-close",[target])};modal.setLoadingState=function(state){modal.loading=state};modal.setDismissibleState=function(state){modal.dismissible=state};$(document).ready((function(){$("body").on("click","[data-wposes-modal]",(function(e){e.preventDefault();modal.open($(this).data("wposes-modal")+"."+modal.prefix)}));$("body").on("click",".wposes-modal-cancel, .close-wposes-modal, #wposes-overlay",(function(e){if(e.target!==this){return true}e.preventDefault();modal.close()}))}));$(document).on("keyup",(function(e){if("Escape"===e.key){modal.close()}}));return modal}(jQuery);